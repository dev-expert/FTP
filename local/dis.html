<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            box-sizing: border-box;
        }

        html,
        body {
            margin: 0;
            padding: 0;
            background-color: bisque;
        }

        .container {
            margin: 10px 50px;
        }

        .form-group {
            margin: 10px;
        }

        input {
            width: 100%;
            border: solid 1px #eee;
            padding: 15px 10px;
        }

        button {
            width: 200px;
            padding: 15px;
            margin-left: 250px;
            background: #fff;
            color: dodgerblue;
            border: solid 1px dodgerblue;
            cursor: pointer;
            transition: all .38s ease-in-out;
        }

        button:hover {
            background: dodgerblue;
            color: #fff;
        }

        table {
            background: #fff;
        }

        table,
        thead,
        tbody,
        tr,
        td,
        th {
            text-align: center;
            margin: auto;
            border: 1px solid #dedede;
            padding: 1rem;
            width: 50%;
        }

        s .main {
            max-width: 1200px;
            margin: auto;
        }

        ul {
            float: right;
            list-style-type: none;
            margin-top: 25px;
        }

        ul li {
            display: inline-block;

        }

        ul li a {
            text-decoration: none;
            color: black;
            padding: 5px 20px;
            border: 1px solid transparent;
            transition: 0.6s ease;

        }

        ul li a:hover {
            background-color: #fff;
            color: black;
        }

        .f1 {
            /* display: flex; */
            justify-content: center;
            text-align: center;
            padding-top: 100px;
        }
    </style>
</head>


<body onload="checkUser(); users()">
    <header>


        <div class="main">
            <ul>
                <li class="active"><a href="#">Home</a> </li>
                <li><a href="#">Services</a> </li>

                <li><a href="#">About</a> </li>
                <li><a href="#">Contact</a> </li>
                <li><a href="#" onclick="logout()">Log Out</a> </li>
            </ul>

        </div>


    </header>
    <div class="f1">
        <div class="firstdiv_f1">
            <h2>Users Information</h2>
        </div>
        <div class="seconddiv_f1">
            <table>
                <thead>

                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>email</th>

                        <th><button onclick="deletetick(gettick('tick'))">Delete Users</button></th>
                    </tr>
                </thead>
                <tbody id="userdetails">

                </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript">
        function users() {

            // console.log(localStorage.getItem('formData'));
            // let {first, last, emai, pass} = JSON.parse(localStorage.getItem('data1'));
            let keys = JSON.parse(localStorage.getItem('data1'));

            let str = "";
            // var keys = document.getElementById('output');
            for (i = 0; i < keys.length; i++) {
                s = keys[i];
                str += `
            <tr>
                <td>${s.first}</td>
                <td>${s.last}</td>
                <td>${s.emai}</td>
                
                <td><input type="checkbox" name="tick" value="${s.emai}"><button type="submit" onclick="deleteuser('${s.emai}')" >delete</button></td>
                </tr>`;
            }
            // output.innerHTML = str;
            document.getElementById("userdetails").innerHTML = str;
        }

        function deleteuser(semail) {

            let keys = JSON.parse(localStorage.getItem("data1"));
            for (i = 0; i < keys.length; i++) {
                s = keys[i];
                if (semail === s.emai) {
                    keys.splice(i, 1);
                }
            }
            localStorage.setItem("data1", JSON.stringify(keys));
            users();
        }
        function deletetick(keys1) {
            let keys = JSON.parse(localStorage.getItem("data1"));
            for (i = 0; i < keys1.length; i++) {
                for (j = 0; j < keys.length; j++) {
                    s = keys[j];
                    if (keys1[i] === s.emai) {
                        keys.splice(j, 1);
                    }
                }
            }
            localStorage.setItem("data1", JSON.stringify(keys));
            users();
        }
        function gettick(semail) {
            const c = document.querySelectorAll(`input[name="${semail}"]:checked`);
            let drr = [];
            c.forEach((c) => {
                drr.push(c.value);
                console.log(c.value);
            });
            return drr;
        }
        function checkUser()
{
    //document.getElementById("body1").style.display= "none";
    var email = localStorage.getItem("currUser");
    if(!email)
    {
       location.replace("login.html"); 
    }
}
function logout()
{
    localStorage.removeItem("currUser");
    location.replace("login.html");
}

    </script>
</body>

</html>