<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>form data</title>
    <link rel="stylesheet" href="local.css">
</head>

<body>

    <div class="container">
        <center>
            <h2>Sign Up</h2>
        </center>
        <form role="form" class="main_form">
            <div class="form-group">
                <input type="text" name="fname" id="fname" ; placeholder="first Name" required>
            </div>
            <div class="form-group">
                <input type="text" name="lname" id="lname" ; placeholder="last Name" required>
            </div>
            <div class="form-group">
                <input type="email" name="email" id="email" ; placeholder="email address" required>
            </div>
            <div class="form-group">
                <input type="password" name="pwd" id="pwd" ; placeholder="password" required>
            </div>
            <!-- <div class="form-group">
                <button type="submit" onclick="register()">user Sign Up</button>
            </div>
            <div class="form-group">
                <button type="submit" onclick="adregister()">admin Sign Up</button>
            </div> --><br>
            <label>Admin</label>
            <label class="switch">

                <input type="checkbox" checked id="usertype">
                <span class="slider round"></span>
            </label>
            <br><br>
            <div class="form-group">
                <button type="submit" onclick="lrwork()">Sign Up</button>
            </div>
        </form>
    </div>
    <div class="form1">
        <a href="login.html"><button type="submit">Login</button></a>
    </div>

    <script type="text/javascript">
         var admin;
        function lrwork() {
            var usertype;
           
            if (document.querySelector('#usertype:checked') !== null) {
                admin="true";
                adregister();
            }
            else {
                admin="false";
                adregister();
            }
        }
        function adregister() {



            var first1 = document.getElementById('fname').value;
            var last1 = document.getElementById('lname').value;
            var emai1 = document.getElementById('email').value;
            var pass1 = document.getElementById('pwd').value;
            var data1 = { first: first1, last: last1, emai: emai1, pass: pass1,admin:admin }


            // var old1 = JSON.parse(localStorage.getItem("data2"));

            // if (!old1) {
            //     old1 = [];
            // }


            // if (old1.find(x => x.emai == emai1)) {
            //     alert("user already exits");
            // }
            // else {
            //     old1.push(data1);
            //     localStorage.setItem("data2", JSON.stringify(old1));
            //     alert("registered successfully");
            // }


            console.log(data1);

            fetch("http://localhost:5000/exportdata", {
                method: "POST", // or 'PUT'
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data1),
            })
                .then((response) => response.json())
                .then((data1) => {
                    console.log("Success:", data1);
                })
                .catch((error) => {
                    console.error("Error:", error);
                });




        }





    </script>
</body>

</html>